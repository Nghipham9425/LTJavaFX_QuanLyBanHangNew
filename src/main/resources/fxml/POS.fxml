<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<VBox spacing="20" stylesheets="@../styles/pos.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.sv.qlbh.controller.POSController">
    
    <!-- HEADER -->
    <HBox alignment="CENTER_LEFT" spacing="20" styleClass="header-section">
        <Label styleClass="page-title" text="POS - BÃ¡n HÃ ng" />
        <Pane HBox.hgrow="ALWAYS" />
        <Label fx:id="lblCurrentUser" styleClass="user-info" text="NhÃ¢n viÃªn: Admin" />
        <Label fx:id="lblCurrentTime" styleClass="time-info" text="15:30 - 25/12/2024" />
    </HBox>
       <!-- MAIN CONTENT -->
    <HBox spacing="20" VBox.vgrow="ALWAYS">
        
        <!-- LEFT PANEL - Products -->
        <VBox spacing="15" styleClass="section-card" HBox.hgrow="ALWAYS">
            <Label styleClass="section-title" text="Danh SÃ¡ch Sáº£n Pháº©m" />
            
            <!-- Search Bar -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <TextField fx:id="txtProductSearch" prefWidth="250" promptText="TÃ¬m kiáº¿m sáº£n pháº©m..." styleClass="search-field" />
                <Button onAction="#handleSearch" prefHeight="32.0" prefWidth="115.0" styleClass="btn-primary" text="TÃ¬m kiáº¿m" />
                <Button onAction="#handleRefresh" prefHeight="32.0" prefWidth="110.0" styleClass="btn-secondary" text="LÃ m má»›i" />
            </HBox>
            
            <!-- Products Table -->
            <TableView fx:id="tblProducts" prefHeight="670.0" prefWidth="475.0" styleClass="data-table" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="colProductName" prefWidth="200" text="TÃªn Sáº£n Pháº©m" />
                    <TableColumn fx:id="colProductPrice" prefWidth="100" text="GiÃ¡" />
                    <TableColumn fx:id="colProductStock" prefWidth="80" text="Tá»“n Kho" />
                </columns>
            </TableView>
            
            <Label styleClass="help-text" text="ðŸ’¡ Double-click vÃ o sáº£n pháº©m Ä‘á»ƒ thÃªm vÃ o giá» hÃ ng" />
        </VBox>
        
        <!-- RIGHT PANEL - Cart & Payment -->
        <VBox maxWidth="450" minWidth="450" spacing="15" styleClass="form-section">
            
            <!-- Cart Section -->
            <VBox spacing="10" styleClass="cart-section">
                <Label styleClass="section-title" text="Giá» HÃ ng" />
                
                <TableView fx:id="tblCart" editable="true" prefHeight="200" styleClass="cart-table">
                    <columns>
                        <TableColumn fx:id="colCartProduct" prefWidth="150" text="Sáº£n Pháº©m" />
                        <TableColumn fx:id="colCartQuantity" prefWidth="60" text="SL" />
                        <TableColumn fx:id="colCartPrice" prefWidth="80" text="GiÃ¡" />
                        <TableColumn fx:id="colCartTotal" prefWidth="90" text="ThÃ nh Tiá»n" />
                    </columns>
                </TableView>
                
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Button fx:id="btnRemoveItem" onAction="#removeFromCart" styleClass="btn-danger" text="XÃ³a Item" />
                    <Button fx:id="btnClearCart" onAction="#clearCart" styleClass="btn-secondary" text="XÃ³a Táº¥t Cáº£" />
                </HBox>
            </VBox>
            
            <!-- Customer Selection -->
            <VBox spacing="10" styleClass="customer-section">
                <Label styleClass="form-label" text="ThÃ´ng Tin KhÃ¡ch HÃ ng" />
                <ComboBox fx:id="cmbCustomer" promptText="Chá»n khÃ¡ch hÃ ng..." styleClass="form-field" />
                <Button onAction="#handleAddNewCustomer" styleClass="btn-info" text="+ ThÃªm KhÃ¡ch HÃ ng Má»›i" />
            </VBox>
            
            <!-- Totals Section -->
            <VBox spacing="10" styleClass="totals-section">
                <Label styleClass="form-label" text="Tá»•ng Cá»™ng" />
                
                <GridPane hgap="10" styleClass="totals-grid" vgap="5">
                    <columnConstraints>
                        <ColumnConstraints prefWidth="120" />
                        <ColumnConstraints />
                    </columnConstraints>
                    
                    <Label styleClass="total-label" text="Táº¡m tÃ­nh:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                    <Label fx:id="lblSubtotal" styleClass="total-value" text="0 VND" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                    
                    <Label styleClass="total-label" text="Giáº£m giÃ¡:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                    <Label fx:id="lblDiscount" styleClass="total-value" text="0 VND" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                    
                    <Separator GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.rowIndex="2" />
                    
                    <Label styleClass="total-label final" text="Tá»•ng cá»™ng:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                    <Label fx:id="lblTotal" styleClass="total-value final" text="0 VND" GridPane.columnIndex="1" GridPane.rowIndex="3" />
               <rowConstraints>
                  <RowConstraints />
                  <RowConstraints />
                  <RowConstraints />
                  <RowConstraints />
               </rowConstraints>
                </GridPane>
            </VBox>
            
            <!-- Payment Methods -->
            <VBox spacing="10" styleClass="payment-section">
                <Label styleClass="form-label" text="PhÆ°Æ¡ng Thá»©c Thanh ToÃ¡n" />
                
                <VBox spacing="8">
                    <RadioButton fx:id="rbCash" selected="true" styleClass="payment-option" text="ðŸ’µ Tiá»n Máº·t" />
                    <RadioButton fx:id="rbVNPay" styleClass="payment-option" text="ðŸ’³ VNPay (Chuyá»ƒn khoáº£n)" />
                </VBox>
            </VBox>
            
            <!-- Checkout Button -->
            <Button fx:id="btnCheckout" onAction="#checkout" styleClass="checkout-btn" text="ðŸ’° THANH TOÃN" />
            
        </VBox>
    </HBox>
    
    <padding>
        <Insets bottom="20" left="20" right="20" top="20" />
    </padding>
</VBox>
